<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>nextTick()</title>
    <script src="../../js/Vue-2.5.17.js"></script>
  </head>
  <body>
    <div id="app">
      <p ref="test">{{message}}</p>
      <button @click="changeValue">按钮</button>
      <p>{{message1}}</p>
      <p>{{message2}}</p>
      <p>{{message3}}</p>
    </div>
    <script>
      new Vue({
        el: '#app',
        data: {
          message: 'Hello',
          message1: '',
          message2: '',
          message3: '',
        },
        methods: {
          changeValue() {
            this.message = '你好';
            this.message1 = this.$refs.test.innerHTML;
            //在下次 DOM 更新循环结束之后执行延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM。
            this.$nextTick(() => {
              this.message2 = this.$refs.test.innerHTML;
            });
            this.message3 = this.$refs.test.innerHTML;
          },
        },
      });
    </script>
  </body>
</html>
